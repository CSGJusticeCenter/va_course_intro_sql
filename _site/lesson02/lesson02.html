<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lesson 2: Filtering and Sorting Data with SQL</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../libs/clipboard/clipboard.min.js"></script>
<script src="../libs/quarto-html/quarto.js" type="module"></script>
<script src="../libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../libs/quarto-html/popper.min.js"></script>
<script src="../libs/quarto-html/tippy.umd.min.js"></script>
<script src="../libs/quarto-html/anchor.min.js"></script>
<link href="../libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../libs/bootstrap/bootstrap.min.js"></script>
<link href="../libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../libs/bootstrap/bootstrap-8de619bbd21ce238746bc3d87e490689.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../libs/quarto-contrib/interactive-sql-1.0.0/interactive-sql.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100..900;1,100..900&amp;display=swap" rel="stylesheet">
<script src="https://unpkg.com/@antonz/sqlite@3.40.0/dist/sqlite3.js"></script>
<script src="https://unpkg.com/sqlime@0.1.3/dist/sqlime-db.js"></script>
<script src="https://unpkg.com/sqlime@0.1.3/dist/sqlime-examples.js"></script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#filtering-data-with-where" id="toc-filtering-data-with-where" class="nav-link" data-scroll-target="#filtering-data-with-where">Filtering data with <code>WHERE</code></a>
  <ul class="collapse">
  <li><a href="#finding-residents-in-a-specific-facility" id="toc-finding-residents-in-a-specific-facility" class="nav-link" data-scroll-target="#finding-residents-in-a-specific-facility">Finding residents in a specific facility</a></li>
  <li><a href="#finding-residents-by-age-of-first-arrest" id="toc-finding-residents-by-age-of-first-arrest" class="nav-link" data-scroll-target="#finding-residents-by-age-of-first-arrest">Finding Residents by Age of First Arrest</a></li>
  </ul></li>
  <li><a href="#using-logical-operators-and-or-not" id="toc-using-logical-operators-and-or-not" class="nav-link" data-scroll-target="#using-logical-operators-and-or-not">Using logical operators (<code>AND</code>, <code>OR</code>, <code>NOT</code>)</a>
  <ul class="collapse">
  <li><a href="#finding-residents-by-sentence-length-and-county" id="toc-finding-residents-by-sentence-length-and-county" class="nav-link" data-scroll-target="#finding-residents-by-sentence-length-and-county">Finding residents by sentence length and county</a></li>
  <li><a href="#finding-residents-from-multiple-counties" id="toc-finding-residents-from-multiple-counties" class="nav-link" data-scroll-target="#finding-residents-from-multiple-counties">Finding residents from multiple counties</a></li>
  <li><a href="#excluding-certain-facilities" id="toc-excluding-certain-facilities" class="nav-link" data-scroll-target="#excluding-certain-facilities">Excluding certain facilities</a></li>
  </ul></li>
  <li><a href="#sorting-results-with-order-by" id="toc-sorting-results-with-order-by" class="nav-link" data-scroll-target="#sorting-results-with-order-by">Sorting results with <code>ORDER BY</code></a>
  <ul class="collapse">
  <li><a href="#sorting-in-ascending-and-descending-order" id="toc-sorting-in-ascending-and-descending-order" class="nav-link" data-scroll-target="#sorting-in-ascending-and-descending-order">Sorting in ascending and descending order</a></li>
  </ul></li>
  <li><a href="#handling-missing-data-null-values" id="toc-handling-missing-data-null-values" class="nav-link" data-scroll-target="#handling-missing-data-null-values">Handling missing data (<code>NULL</code> values)</a>
  <ul class="collapse">
  <li><a href="#finding-residents-with-an-unknown-birth-country" id="toc-finding-residents-with-an-unknown-birth-country" class="nav-link" data-scroll-target="#finding-residents-with-an-unknown-birth-country">Finding residents with an unknown birth country</a></li>
  <li><a href="#finding-residents-with-a-calculated-release-date" id="toc-finding-residents-with-a-calculated-release-date" class="nav-link" data-scroll-target="#finding-residents-with-a-calculated-release-date">Finding residents with a calculated release date</a></li>
  </ul></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways">Key takeaways</a></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources">Additional resources</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lesson 2: Filtering and Sorting Data with SQL</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Now that you understand the basics of SQL and relational databases, and can select specific data from tables, it’s time to refine your queries by filtering and sorting data. The ability to retrieve specific records based on conditions is essential for corrections analysts who need to analyze resident populations, intake trends, and case processing timelines.</p>
<p>This lesson covers:</p>
<ul>
<li><p>The <code>WHERE</code> clause for filtering records</p></li>
<li><p>Using logical operators (<code>AND</code>, <code>OR</code>, <code>NOT</code>) to refine searches</p></li>
<li><p>Sorting results with <code>ORDER BY</code></p></li>
<li><p>Handling missing or unknown values with <code>IS NULL</code> and <code>IS NOT NULL</code></p></li>
</ul>
</section>
<section id="filtering-data-with-where" class="level2">
<h2 class="anchored" data-anchor-id="filtering-data-with-where">Filtering data with <code>WHERE</code></h2>
<p>In SQL, the <code>WHERE</code> clause is used to filter your data so that you only retrieve the rows that meet specific criteria. This is one of the most important tools for corrections analysts because it allows you to focus your analysis on a particular subset of data — for example, residents who meet certain demographic criteria, cases from specific counties, or intakes within a particular date range.</p>
<p>In practice, data tables can contain thousands—or even millions—of records. Without filtering, your query might return far more data than you can reasonably interpret or analyze. By using <code>WHERE</code>, you can narrow the scope of your queries to return only the data that is most relevant to the question at hand.</p>
<p>The <code>WHERE</code> clause is often used in conjunction with <strong>comparison operators</strong>, which define the condition a field must meet for a row to be included in the results:</p>
<ul>
<li><p><code>=</code> (equal to)</p></li>
<li><p><code>!=</code> or <code>&lt;&gt;</code> (not equal to)</p></li>
<li><p><code>&gt;</code> (greater than)</p></li>
<li><p><code>&lt;</code> (less than)</p></li>
<li><p><code>&gt;=</code> (greater than or equal to)</p></li>
<li><p><code>&lt;=</code> (less than or equal to)</p></li>
</ul>
<p>Let’s look at how this works in practice using examples that a corrections analyst might encounter:</p>
<section id="finding-residents-in-a-specific-facility" class="level3">
<h3 class="anchored" data-anchor-id="finding-residents-in-a-specific-facility">Finding residents in a specific facility</h3>
<p>Suppose you need to review the records for residents currently housed at the North State Correctional Facility (<code>NSCF</code>). Using <code>facil_id</code> from your intakes table, you can write use the following query:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb1"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> intake_id, resident_id, facil_id, admission_date, sentence_date</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> intakes</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> facil_id <span class="op">=</span> <span class="st">'NSCF'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>The intakes table is filtered to show only those rows where the <code>facil_id</code> is equal to <code>NSCF</code>. This kind of targeted filtering is useful when you’re doing facility-specific analysis — like monitoring capacity and population characteristics at a particular location.</p>
</section>
<section id="finding-residents-by-age-of-first-arrest" class="level3">
<h3 class="anchored" data-anchor-id="finding-residents-by-age-of-first-arrest">Finding Residents by Age of First Arrest</h3>
<p>Let’s say you are preparing a report for your supervisor on residents who had contact with the justice system at an early age. You want to identify all residents whose first arrest occurred at age 18 or younger. Here’s how you would write that query:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb2"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> resident_id, first_name, last_name, age_at_first_arrest</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> residents</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> age_at_first_arrest <span class="op">&lt;=</span> <span class="dv">18</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>It filters the <code>residents</code> table to return only those rows where the <code>age_at_first_arrest</code> is 18 or younger. This type of analysis can help staff assess trends in early justice involvement and potentially inform prevention or intervention strategies.</p>
</section>
</section>
<section id="using-logical-operators-and-or-not" class="level2">
<h2 class="anchored" data-anchor-id="using-logical-operators-and-or-not">Using logical operators (<code>AND</code>, <code>OR</code>, <code>NOT</code>)</h2>
<p>Now that you’ve learned how to filter data with the WHERE clause, you’ll often find that you need to apply more than one condition at a time. That’s where logical operators come in.</p>
<p>Logical operators allow you to build more complex filters by combining multiple conditions. This is extremely useful for corrections analysts who need to refine their queries to capture very specific subsets of data—such as residents with particular sentencing characteristics, from a certain location, or admitted during a specific time period.</p>
<p>There are three main logical operators used in SQL:</p>
<ul>
<li><p><code>AND</code> returns records only if <strong>all</strong> conditions are true.</p></li>
<li><p><code>OR</code> returns records if <strong>any</strong> of the conditions are true.</p></li>
<li><p><code>NOT</code> <strong>excludes</strong> records that meet a certain condition.</p></li>
</ul>
<p>These operators help you shape your queries to mirror the real-world logic behind your reporting questions. Let’s look at some real-world examples:</p>
<section id="finding-residents-by-sentence-length-and-county" class="level3">
<h3 class="anchored" data-anchor-id="finding-residents-by-sentence-length-and-county">Finding residents by sentence length and county</h3>
<p>Suppose the department head asks you to produce a report with a list of residents admitted from County 5 serving a sentence of more than 10 years. Use the <code>AND</code> operator to ensure both conditions are applied:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb3"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> resident_id, sentence_years, sentence_months, county_id</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> intakes</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> sentence_years <span class="op">&gt;</span> <span class="dv">10</span> <span class="kw">AND</span> county_id <span class="op">=</span> <span class="dv">5</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>This query filters the intakes table to include only residents with more than 10 years in their sentence <strong>and</strong> who were admitted from County 5. Both conditions must be true for a record to be included. This type of filtering is useful when identifying high-sentence populations from a specific geographic area—perhaps for resource planning.</p>
</section>
<section id="finding-residents-from-multiple-counties" class="level3">
<h3 class="anchored" data-anchor-id="finding-residents-from-multiple-counties">Finding residents from multiple counties</h3>
<p>Let’s say you’re working on a review of intake trends from Counties 5 and 7. Use the <code>OR</code> operator to include residents from either of these counties:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb4"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> intake_id, resident_id, county_id, admission_date, sentence_date, rel_ready_date</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> intakes</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> county_id <span class="op">=</span> <span class="dv">5</span> <span class="kw">OR</span> county_id <span class="op">=</span> <span class="dv">7</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>This returns any record where the resident was admitted from <strong>either</strong> County 5 <strong>or</strong> County 7. <code>OR</code> is helpful when you want to analyze data across a set of values that aren’t mutually exclusive but still relevant to your work.</p>
</section>
<section id="excluding-certain-facilities" class="level3">
<h3 class="anchored" data-anchor-id="excluding-certain-facilities">Excluding certain facilities</h3>
<p>Imagine that you need to generate a report to analyze intake trends for the men’s facilities. You can write a query to exclude the one women’s facility <code>SWSCF</code> by using <code>NOT</code> or <code>!=</code>:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb5"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> intake_id, facil_id, sentence_date, admission_date, rel_ready_date</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> intakes</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="kw">NOT</span> facil_id <span class="op">=</span> <span class="st">'SWSCF'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>or</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb6"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> intake_id, facil_id, sentence_date, admission_date, rel_ready_date</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> intakes</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> facil_id <span class="op">!=</span> <span class="st">'SWSCF'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>Both versions exclude all records for residents housed at <code>SWSCF</code>. This kind of exclusion is important when preparing population-specific analysis — for example, to inform programming, staffing, or space allocation for women.</p>
<p>Logical operators give analysts the flexibility to adjust queries to real-world questions that rarely depend on a single filter. By combining conditions with <code>AND</code>, <code>OR</code>, and <code>NOT</code>, you can build precise queries that return only the data you truly need.</p>
</section>
</section>
<section id="sorting-results-with-order-by" class="level2">
<h2 class="anchored" data-anchor-id="sorting-results-with-order-by">Sorting results with <code>ORDER BY</code></h2>
<p>When you run a SQL query, the database returns the matching results, but it doesn’t automatically sort them in a meaningful order. As a corrections analyst, you’ll often want to organize your data to quickly identify trends, patterns, or outliers—like the next scheduled releases, the longest wait times for processing, or the most recent admissions.</p>
<p>The <code>ORDER BY</code> clause allows you to control the order in which your query results appear, based on one or more columns. This is particularly helpful when you’re preparing reports, dashboards, or even quality assurance reviews where data needs to be structured for easier interpretation.</p>
<section id="sorting-in-ascending-and-descending-order" class="level3">
<h3 class="anchored" data-anchor-id="sorting-in-ascending-and-descending-order">Sorting in ascending and descending order</h3>
<p>SQL allows you to sort your results in either ascending or descending order using the following keywords:</p>
<ul>
<li><code>ASC</code>: Ascending order (default sorting order)
<ul>
<li>Sorts numbers <strong>smallest to largest</strong></li>
<li>Sorts text <strong>A to Z</strong></li>
<li>Sorts dates <strong>earliest to latest</strong></li>
</ul></li>
<li><code>DESC</code>: Descending order
<ul>
<li>Sorts numbers <strong>largest to smallest</strong></li>
<li>Sorts text <strong>Z to A</strong></li>
<li>Sorts dates <strong>latest to earliest</strong></li>
</ul></li>
</ul>
<p>This sorting ability helps surface the top or bottom of your dataset, depending on the use case. Let’s practice sorting your corrections data:</p>
<section id="sorting-by-expected-release-date-asc-oldest-first" class="level4">
<h4 class="anchored" data-anchor-id="sorting-by-expected-release-date-asc-oldest-first">Sorting by expected release date <code>ASC</code> (oldest first)</h4>
<p>You’ve been tasked with generating a report to monitor upcoming releases. You can use <code>ORDER BY</code> on the <code>exp_release_date</code> field to sort the results from earliest to latest:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb7"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> intake_id, resident_id, admission_date, exp_release_date</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> intakes</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> exp_release_date <span class="kw">ASC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>This query retrieves intake records and arranges them so that residents with the soonest expected release dates appear first. This can help your team prioritize review of residents nearing release, coordinate transitional services, or verify release date accuracy.</p>
</section>
<section id="sorting-by-admission-date-desc-newest-first" class="level4">
<h4 class="anchored" data-anchor-id="sorting-by-admission-date-desc-newest-first">Sorting by admission date <code>DESC</code> (newest first)</h4>
<p>Let’s say you wanted to monitor the intake progress for the most recent admission intakes. You can sort the data in descending order based on <code>admission_date</code>:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb8"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> intake_id, resident_id, admission_date, county_id, off_group</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> intakes</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> admission_date <span class="kw">DESC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>This query returns records starting with the most recent admissions and going backward. This is useful when analyzing intake patterns, monitoring intake capacity, or flagging cases that may have processing delays.</p>
</section>
</section>
</section>
<section id="handling-missing-data-null-values" class="level2">
<h2 class="anchored" data-anchor-id="handling-missing-data-null-values">Handling missing data (<code>NULL</code> values)</h2>
<p>In the real world, not all data is complete or perfect—especially in large, complex datasets like those used in corrections systems. Sometimes, information might be unavailable at the time of data entry, intentionally left blank, or simply not collected. In a database, these unknown or missing values are represented as <code>NULL</code>.</p>
<p>Understanding how to work with <code>NULL</code> values is essential for corrections analysts, as these gaps in the data can tell you just as much as the values that are present. For example, a blank birth country field could indicate a need to review and update intake documentation.</p>
<p>SQL provides two specific conditions to work with <code>NULL</code> values:</p>
<ul>
<li><p><code>IS NULL</code>: Checks for missing data</p></li>
<li><p><code>IS NOT NULL</code>: Checks for existing (non-missing) data</p></li>
</ul>
<p>You cannot use standard comparison operators like <code>=</code> or <code>!=</code> to check for <code>NULL</code> - doing so won’t return accurate results. Always use <code>IS NULL</code> or <code>IS NOT NULL</code> when handling these values.</p>
<p>Let’s look at some examples:</p>
<section id="finding-residents-with-an-unknown-birth-country" class="level3">
<h3 class="anchored" data-anchor-id="finding-residents-with-an-unknown-birth-country">Finding residents with an unknown birth country</h3>
<p>Let’s say you’re conducting a data audit and want to identify resident records that are missing birth country information. This might be part of an effort to improve data quality or ensure that records meet reporting standards. You can use this query to find records with a missing birth country:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb9"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> resident_id, first_name, last_name, birth_country</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> residents</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> birth_country <span class="kw">IS</span> <span class="kw">NULL</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>This pulls all resident records where the birth country has not been entered. This can help you flag records that may require follow-up or correction during file reviews or audits.</p>
</section>
<section id="finding-residents-with-a-calculated-release-date" class="level3">
<h3 class="anchored" data-anchor-id="finding-residents-with-a-calculated-release-date">Finding residents with a calculated release date</h3>
<p>Perhaps you’ve been asked to compile a list of intake cases that have already had a release date calculated for auditing purposes. The following query can be used to generate that report:</p>
<div class="interactive-sql">
<div class="sourceCode" id="cb10"><pre class="sourceCode sql interactive state_doc code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> intake_id, resident_id, sentence_date, admission_date, rel_ready_date</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> intakes</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> rel_ready_date <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What this query does:</strong></p>
<p>This query filters the intake records to return only those where a release date has been entered. This helps you isolate completed cases and exclude those that require further attention.</p>
<p>Being comfortable with <code>NULL</code> values allows you to account for gaps in your data and avoid false assumptions. In corrections work, this can be the difference between catching a missed release date and allowing a case to sit idle due to an unflagged issue.</p>
</section>
</section>
<section id="key-takeaways" class="level2">
<h2 class="anchored" data-anchor-id="key-takeaways">Key takeaways</h2>
<ul>
<li><p>The <code>WHERE</code> clause allows you to filter your results and return only the records that meet specific conditions. This is critical when you need to focus on certain populations—like residents from a particular facility, county, or sentence range—without being overwhelmed by unnecessary data.</p></li>
<li><p>Logical operators (<code>AND</code>, <code>OR</code>, <code>NOT</code>) help you combine multiple conditions in a single query. These tools allow you to construct more refined searches, which is especially useful when tracking special case types or creating targeted reports for your supervisors or department heads.</p></li>
<li><p><code>ORDER BY</code> lets you sort your results in ascending or descending order. Whether you’re identifying residents with the longest sentence lengths or reviewing upcoming release dates, sorting can help you spot patterns, anomalies, and priority cases faster.</p></li>
<li><p><code>NULL</code> values represent missing or unknown data in the database. Learning how to identify these using <code>IS NULL</code> and <code>IS NOT NULL</code> allows you to audit your data more effectively, flag incomplete records, and ensure your analyses are based on the most accurate and complete information available.</p></li>
</ul>
<p>Together, these skills allow you to explore your database with precision. Whether you’re writing quick filters or pulling detailed reports, being able to query based on specific conditions is foundational for any corrections analyst.</p>
<hr>
<p>In this lesson, you learned how to filter and sort data using SQL queries. In the next lesson, you’ll build on these concepts and be introduced to aggregate functions - powerful tools that allow you to count, sum, and average your data to generate meaningful statistics and summaries.</p>
</section>
<section id="additional-resources" class="level2">
<h2 class="anchored" data-anchor-id="additional-resources">Additional resources</h2>
<ul>
<li>W3Schools.com (Website with more in-depth SQL learning and practice)</li>
<li>MySQL Cookbook, Fourth Edition</li>
</ul>
<sqlime-db name="state_doc" path="https://raw.githubusercontent.com/CSGJusticeCenter/va_data/main/courses/intro_sql/state_doc.db"></sqlime-db>
<sqlime-examples db="state_doc" selector="div.interactive-sql pre.state_doc code" editable=""></sqlime-examples>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<script src="../libs/quarto-contrib/interactive-sql-1.0.0/interactive-sql.js"></script>
</body></html>